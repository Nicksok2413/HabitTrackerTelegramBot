# üöÄ Habit Tracker Telegram Bot

![alt text](https://img.shields.io/badge/Python-3.12-blue?style=for-the-badge&logo=python&logoColor=white)
![alt text](https://img.shields.io/badge/FastAPI-0.121+-009688?style=for-the-badge&logo=fastapi&logoColor=white)
![alt text](https://img.shields.io/badge/Aiogram-3.x-2CA5E0?style=for-the-badge&logo=telegram&logoColor=white)
![alt text](https://img.shields.io/badge/PostgreSQL-18-336791?style=for-the-badge&logo=postgresql&logoColor=white)
![alt text](https://img.shields.io/badge/Redis-7.x-DC382D?style=for-the-badge&logo=redis&logoColor=white)
![alt text](https://img.shields.io/badge/Celery-5.x-37814A?style=for-the-badge&logo=celery&logoColor=white)
![alt text](https://img.shields.io/badge/Docker-Compose-2496ED?style=for-the-badge&logo=docker&logoColor=white)
![alt text](https://img.shields.io/badge/Grafana-Monitoring-F46800?style=for-the-badge&logo=grafana&logoColor=white)
![alt text](https://img.shields.io/badge/Sentry-Error_Tracking-362D59?style=for-the-badge&logo=sentry&logoColor=white)
![alt text](https://img.shields.io/github/actions/workflow/status/Nicksok2413/HabitTrackerTelegramBot/ci.yml?style=for-the-badge&logo=github&label=tests)

**High-Load Ready** —Å–µ—Ä–≤–∏—Å –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞ –ø—Ä–∏–≤—ã—á–µ–∫ —á–µ—Ä–µ–∑ Telegram.
–ü—Ä–æ–µ–∫—Ç –ø–æ—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º **Clean Architecture**, **SOLID** –ø—Ä–∏–Ω—Ü–∏–ø–æ–≤, –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ—á–µ—Ä–µ–¥–µ–π –∏ –ø–æ–ª–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ **Observability**.

---

## ‚ú® –ö–ª—é—á–µ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üë§ –î–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
*   **‚ö°Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∞–º–∏:** –°–æ–∑–¥–∞–Ω–∏–µ, —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, —É–¥–∞–ª–µ–Ω–∏–µ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–ø–∏—Å–∫–∞ –ø—Ä–∏–≤—ã—á–µ–∫ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π.
*   **üìÖ –¢—Ä–µ–∫–∏–Ω–≥ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:** –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç–∞—Ç—É—Å–æ–≤ "–í—ã–ø–æ–ª–Ω–µ–Ω–æ" / "–û–∂–∏–¥–∞–µ—Ç" –ø—Ä—è–º–æ –≤ —Å–ø–∏—Å–∫–µ –ø—Ä–∏–≤—ã—á–µ–∫ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è.
*   **üî• –°–∏—Å—Ç–µ–º–∞ —Å—Ç—Ä–∏–∫–æ–≤ (Streaks):** –ü–æ–¥—Å—á–µ—Ç –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω—ã—Ö —Å–µ—Ä–∏–π –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–π. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Å–±—Ä–æ—Å —Å—Ç—Ä–∏–∫–∞ –ø—Ä–∏ –ø—Ä–æ–ø—É—Å–∫–µ –¥–Ω—è.
*   **üåç –£–º–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è (Timezone Aware):** –ù–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –ø—Ä–∏—Ö–æ–¥—è—Ç —Ç–æ—á–Ω–æ –≤ –∑–∞–¥–∞–Ω–Ω–æ–µ –≤—Ä–µ–º—è –ø–æ —á–∞—Å–æ–≤–æ–º—É –ø–æ—è—Å—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è.
*   **üèÜ –ì–µ–π–º–∏—Ñ–∏–∫–∞—Ü–∏—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –ø—Ä–∏–≤—ã—á–∫–∏ –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ —Ü–µ–ª–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 21 –¥–µ–Ω—å).
*   **üì± –£–¥–æ–±–Ω—ã–π UI:** Inline-–∫–Ω–æ–ø–∫–∏, "—É–º–Ω–∞—è" –ø–∞–≥–∏–Ω–∞—Ü–∏—è —Å–ø–∏—Å–∫–æ–≤, FSM (–º–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π) –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤.

### ‚öôÔ∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –æ—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏
*   **Microservices:** 4 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–∞ (API, Bot, Scheduler, Worker) + –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞.
*   **Event Driven:** –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è —Å–∞–º, –∞ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –∑–∞–¥–∞—á–∏ –≤ **Redis**.
*   **Scalability:** –í–æ—Ä–∫–µ—Ä—ã **Celery** –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, —Å–æ–±–ª—é–¥–∞—è **Rate Limits** Telegram (25 msg/s).
*   **Observability:** –ü–æ–ª–Ω—ã–π —Å—Ç–µ–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (Prometheus, Grafana, Loki) + —Ç—Ä–µ–∫–∏–Ω–≥ –æ—à–∏–±–æ–∫ (Sentry).
*   **Reliability:** Healthchecks, Graceful Shutdown, –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –æ—á–µ—Ä–µ–¥–µ–π –∏ –ë–î.
*   **Security:** –ó–∞—â–∏—Ç–∞ –æ—Ç IDOR, –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö (Pydantic v2), –±–µ–∑–æ–ø–∞—Å–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å —Ç–æ–∫–µ–Ω–∞–º–∏ (PyJWT).

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

### Core & Infrastructure
*   **Python 3.12** ‚Äî —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å.
*   **Docker & Docker Compose** ‚Äî –æ—Ä–∫–µ—Å—Ç—Ä–∞—Ü–∏—è. –ï–¥–∏–Ω—ã–π –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–π `Dockerfile` (Multi-stage).
*   **PostgreSQL 18** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î (Async).
*   **Redis 7** ‚Äî –±—Ä–æ–∫–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏–π –∏ –∫—ç—à.
*   **Make** ‚Äî –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è.
*   **Poetry** ‚Äî —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏.

### Backend (API)
*   **FastAPI** ‚Äî –≤—ã—Å–æ–∫–æ–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω—ã–π REST API.
*   **SQLAlchemy 2.0 (Async)** ‚Äî —Ä–∞–±–æ—Ç–∞ —Å –ë–î (ORM).
*   **Alembic** ‚Äî –º–∏–≥—Ä–∞—Ü–∏–∏.
*   **Pydantic v2** ‚Äî –≤–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ö–µ–º—ã.
*   **PyJWT** ‚Äî –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è —á–µ—Ä–µ–∑ JWT —Ç–æ–∫–µ–Ω—ã (HS256).

### Frontend (Bot)
*   **Aiogram 3.x** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π —Ñ—Ä–µ–π–º–≤–æ—Ä–∫.
*   **FSM** ‚Äî –º–∞—à–∏–Ω–∞ —Å–æ—Å—Ç–æ—è–Ω–∏–π –¥–ª—è –¥–∏–∞–ª–æ–≥–æ–≤.
*   **Httpx** ‚Äî –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –∫ API.

### Background & Async
*   **Apscheduler** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å–æ–±—ã—Ç–∏–π –ø–æ –≤—Ä–µ–º–µ–Ω–∏.
*   **Celery** ‚Äî —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á.
*   **Asgiref** ‚Äî –º–æ—Å—Ç –º–µ–∂–¥—É sync –∏ async –∫–æ–¥–æ–º.

### Monitoring (PLG Stack)
*   **Prometheus** ‚Äî —Å–±–æ—Ä –º–µ—Ç—Ä–∏–∫ (RPS, Latency, Errors).
*   **Grafana** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –¥–∞—à–±–æ—Ä–¥–æ–≤.
*   **Loki + Promtail** ‚Äî —Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π —Å–±–æ—Ä –ª–æ–≥–æ–≤.
*   **Celery Exporter** ‚Äî –º–µ—Ç—Ä–∏–∫–∏ –æ—á–µ—Ä–µ–¥–µ–π.
*   **Sentry** ‚Äî –æ—à–∏–±–∫–∏.

### QA
*   **Pytest + Pytest-Docker** ‚Äî –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã —Å **—Ä–µ–∞–ª—å–Ω–æ–π –ë–î** –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ.
*   **Ruff** ‚Äî –ª–∏–Ω—Ç–µ—Ä/—Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä.
*   **Mypy** ‚Äî —Å—Ç—Ä–æ–≥–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è (`strict`).
*   **GitHub Actions** ‚Äî CI –ø–∞–π–ø–ª–∞–π–Ω.

---

## üèõ –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

–ü—Ä–æ–µ–∫—Ç —Ä–∞–∑–¥–µ–ª–µ–Ω –Ω–∞ 4 –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã—Ö —Å–µ—Ä–≤–∏—Å–∞, —Ä–∞–±–æ—Ç–∞—é—â–∏—Ö –≤ –æ–¥–Ω–æ–π —Å–µ—Ç–∏:

1.  **API Service:** –Ø–¥—Ä–æ —Å–∏—Å—Ç–µ–º—ã.
    *   –†–µ–∞–ª–∏–∑—É–µ—Ç –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫—É –∏ REST API.
    *   –†–∞–±–æ—Ç–∞–µ—Ç —Å –ë–î —á–µ—Ä–µ–∑ —Å–ª–æ–∏ *Repository* –∏ *Service*.
    *   –£–ø—Ä–∞–≤–ª—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏ (*Unit of Work*).
2.  **Bot Service:** Frontend ("–¢–æ–Ω–∫–∏–π –∫–ª–∏–µ–Ω—Ç").
    *   –û—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ UI/UX (–∫–Ω–æ–ø–∫–∏, –¥–∏–∞–ª–æ–≥–∏).
    *   –ù–µ –∏–º–µ–µ—Ç –ø—Ä—è–º–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î, –æ–±—â–∞–µ—Ç—Å—è —Å –¥–∞–Ω–Ω—ã–º–∏ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ API.
3.  **Scheduler Service:** –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫.
    *   **Producer:** –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –Ω–∞—Ö–æ–¥–∏—Ç –ø—Ä–∏–≤—ã—á–∫–∏ –¥–ª—è –Ω–∞–ø–æ–º–∏–Ω–∞–Ω–∏—è –∏ —Å–æ–∑–¥–∞–µ—Ç –∑–∞–¥–∞—á–∏ –≤ –æ—á–µ—Ä–µ–¥–∏ Redis.
    *   **Maintenance:** –í—ã–ø–æ–ª–Ω—è–µ—Ç —Å–ª—É–∂–µ–±–Ω—ã–µ –∑–∞–¥–∞—á–∏ (—Å–±—Ä–æ—Å —Å—Ç—Ä–∏–∫–æ–≤ —É –ø—Ä–æ–ø—É—â–µ–Ω–Ω—ã—Ö –ø—Ä–∏–≤—ã—á–µ–∫), —Ä–∞–±–æ—Ç–∞—è —Å –ë–î –Ω–∞–ø—Ä—è–º—É—é –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏.
4.  **Worker Service:** –ö–æ–Ω—Å—É–º–µ—Ä.
    *   –ó–∞–±–∏—Ä–∞–µ—Ç –∑–∞–¥–∞—á–∏ –∏–∑ Redis (Celery).
    *   –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –≤ Telegram, –∫–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É—è –ª–∏–º–∏—Ç—ã API.

**Sentry** –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –¥–ª—è —Å–∫–≤–æ–∑–Ω–æ–≥–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ –æ—à–∏–±–æ–∫.

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
*   Docker –∏ Docker Compose
*   Make (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

1.  **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
    ```bash
    git clone https://github.com/Nicksok2413/HabitTrackerTelegramBot.git
    cd HabitTrackerTelegramBot
    ```

2.  **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ:**
    –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –∏ –∑–∞–ø–æ–ª–Ω–∏—Ç–µ –µ–≥–æ —Å–≤–æ–∏–º–∏ –¥–∞–Ω–Ω—ã–º–∏ (–¢–æ–∫–µ–Ω –±–æ—Ç–∞, –ø–∞—Ä–æ–ª–∏):
    ```bash
    cp .env.example .env
    ```
    > ‚ö†Ô∏è **–í–∞–∂–Ω–æ:** –û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ —Å–≥–µ–Ω–µ—Ä–∏—Ä—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–µ `DB_PASSWORD`, `API_BOT_SHARED_KEY` –∏ `JWT_SECRET_KEY`.

    > üí° **–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è:** –ò–∑–º–µ–Ω–∏—Ç–µ `GRAFANA_ADMIN_USER` –∏ `GRAFANA_ADMIN_PASSWORD` –¥–ª—è –≤—Ö–æ–¥–∞ –≤ Grafana UI.

3.  **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–æ–µ–∫—Ç:**
    –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ make –¥–ª—è –±—ã—Å—Ç—Ä–æ–π —Å–±–æ—Ä–∫–∏ –∏ –∑–∞–ø—É—Å–∫–∞:
    ```bash
    make up
    ```
    *–ò–ª–∏ –∫–ª–∞—Å—Å–∏—á–µ—Å–∫–∏–º —Å–ø–æ—Å–æ–±–æ–º: `docker compose up -d --build`*

4.  **–ü—Ä–∏–º–µ–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
    ```bash
    make migrate
    ```
    *–ò–ª–∏: `docker compose run --rm api-migrate`*

5.  **–î–æ—Å—Ç—É–ø:**
    *   **–ë–æ—Ç:** –í Telegram.
    *   **API Docs:** `http://localhost:8000/docs`
    *   **Grafana:** `http://localhost:3000`

---

## üë®‚Äçüíª –ö–æ–º–∞–Ω–¥—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ (Makefile)

–í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω `Makefile` –¥–ª—è —É–¥–æ–±—Å—Ç–≤–∞ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:

---
*   `make install` ‚Äî –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏.
---
*   `make up` ‚Äî –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –≤ —Ñ–æ–Ω–µ.
*   `make down` ‚Äî –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.
*   `make rebuild` ‚Äî –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã.
*   `make prune` ‚Äî –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –£–î–ê–õ–ò–¢–¨ –í–°–ï –î–ê–ù–ù–´–ï (–ë–î, –ª–æ–≥–∏).
*   `make logs` ‚Äî –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.
---
*   `make migrate` ‚Äî –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∫ –ë–î.
*   `make revision m="message"` ‚Äî –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–∏–≥—Ä–∞—Ü–∏—é (–∞–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è).
---
*   `make lint` ‚Äî –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ –ª–∏–Ω—Ç–µ—Ä–æ–º Ruff.
*   `make lint-fix` ‚Äî –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ –ª–∏–Ω—Ç–µ—Ä–æ–º Ruff.
*   `make format-check` ‚Äî –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–¥ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–æ–º Ruff.
*   `make format` ‚Äî –û—Ç—Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–æ–¥ —Ñ–æ—Ä–º–∞—Ç—Ç–µ—Ä–æ–º Ruff.
*   `make types` ‚Äî –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫—É—é —Ç–∏–ø–∏–∑–∞—Ü–∏—é mypy.
*   `make test` ‚Äî –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã.
*   `make test-cov` ‚Äî –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç—ã —Å –æ—Ç—á–µ—Ç–æ–º –æ –ø–æ–∫—Ä—ã—Ç–∏–∏ (`coverage`).
*   `make check` ‚Äî **–ó–∞–ø—É—Å—Ç–∏—Ç—å —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–π –∞–Ω–∞–ª–∏–∑** (lint, format-check, types).
*   `make check-all` ‚Äî **–ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª –ø—Ä–æ–≤–µ—Ä–æ–∫** (check, test).

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è —Ç–µ—Å—Ç–æ–≤ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è **–æ—Ç–¥–µ–ª—å–Ω—ã–π –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä PostgreSQL**, —á—Ç–æ –≥–∞—Ä–∞–Ω—Ç–∏—Ä—É–µ—Ç —á–∏—Å—Ç–æ—Ç—É –¥–∞–Ω–Ω—ã—Ö –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –±–∞–∑—ã —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏.

–ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç–æ–≤:
```bash
  make test
```

–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ `docker-compose.test.yml`, `tests/conftest.py` –∏ `tests/api/conftest.py`.

---

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–í –ø—Ä–æ–µ–∫—Ç–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥.
–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –∑–∞–π–¥–∏—Ç–µ –≤ Grafana UI (`localhost:3000`), –ø–æ–¥–∫–ª—é—á–∏—Ç–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ (`Prometheus:9090`, `Loki:3100`) –∏ –∏–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ –¥–∞—à–±–æ—Ä–¥—ã:
*   **FastAPI:** `monitoring/dashboards/fastapi.json` (ID 22676)
*   **Celery:** `monitoring/dashboards/celery.json` (ID 20076)

–í—ã —Å–º–æ–∂–µ—Ç–µ –≤–∏–¥–µ—Ç—å RPS, –≤—Ä–µ–º—è –æ—Ç–≤–µ—Ç–∞ API, –¥–ª–∏–Ω—É –æ—á–µ—Ä–µ–¥–∏ –∑–∞–¥–∞—á –∏ –ª–æ–≥–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–æ–≤ –≤ –æ–¥–Ω–æ–º –æ–∫–Ω–µ.

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ .github/                # CI/CD Workflows
‚îú‚îÄ‚îÄ docker/                 # –ï–¥–∏–Ω—ã–π Dockerfile –∏ entrypoints
‚îú‚îÄ‚îÄ migrations/             # –ú–∏–≥—Ä–∞—Ü–∏–∏ –ë–î (Alembic)
‚îú‚îÄ‚îÄ monitoring/             # –ö–æ–Ω—Ñ–∏–≥–∏ (Prometheus, Loki, Promtail) –∏ –¥–∞—à–±–æ—Ä–¥—ã
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ api/                # Backend (FastAPI)
‚îÇ   ‚îú‚îÄ‚îÄ bot/                # Frontend (Aiogram)
‚îÇ   ‚îú‚îÄ‚îÄ scheduler/          # Producer –∑–∞–¥–∞—á & Maintenance (Apscheduler)
‚îÇ   ‚îú‚îÄ‚îÄ worker/             # Consumer –∑–∞–¥–∞—á (Celery)
‚îÇ   ‚îî‚îÄ‚îÄ core_shared/        # –û–±—â–∏–π –∫–æ–¥ (Config, Logging, Sentry)
‚îÇ
‚îú‚îÄ‚îÄ tests/                  # –¢–µ—Å—Ç—ã (Pytest)
‚îú‚îÄ‚îÄ docker-compose.yml      # Prod config (Secure, closed ports)
‚îú‚îÄ‚îÄ docker-compose.test.yml # CI config (CI)
‚îú‚îÄ‚îÄ Makefile                # Shortcuts
‚îú‚îÄ‚îÄ poetry.lock             # –§–∏–∫—Å–∞—Ü–∏—è –≤–µ—Ä—Å–∏–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
‚îî‚îÄ‚îÄ pyproject.toml          # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
```

---

## –ê–≤—Ç–æ—Ä

Developed by **Mikalai Sakalouski** with ‚ù§Ô∏è and Python.